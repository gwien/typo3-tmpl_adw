{namespace s=Subugoe\Find\ViewHelpers}
{namespace t3jquery=Tx_T3jquery_ViewHelpers}
<f:comment>
	Creates a map facet.

	It expects coordinates.
	It defines the map, initiates it and adds the markers
</f:comment>
<s:page.linkCSS file="EXT:tmpl_adw/Resources/Public/JavaScript/leaflet/leaflet.css"/>
<s:page.linkCSS file="EXT:tmpl_adw/Resources/Public/Css/germaniasacraMap.css"/>
<t3jquery:addJQueryAndScript jsfile="EXT:tmpl_adw/Resources/Public/JavaScript/leaflet/leaflet.js"></t3jquery:addJQueryAndScript>
<t3jquery:addJQueryAndScript jsfile="EXT:tmpl_adw/Resources/Public/JavaScript/germaniasacraMap.js">
</t3jquery:addJQueryAndScript>
<div class="facetMap-container">
	<div class="mapContainer">
		<div class="leafletZoom"><i class="fa fa-expand fa-1f"></i></div>
		<div id="lmap" class="tool-mode__lmap"></div>
		<script>
			var leafletMap = L.map('lmap', {zoomControl: false, attributionControl: false}).setView([52,14], 3);
			leafletInitMap();
		<f:for each="{facetData.values}" as="itemCount" key="coord" iteration="iterator">
			leafletIterate({coord});
		</f:for>
	</script>
	</div>
	<div class="leafletCopy">Open street map contributors</div>
</div>
<style>
	.leafletZoom {
		position: absolute;
		right: 10px;
		z-index: 7;
		width: 25px;
		height: 25px;
		background: rgb(255, 255, 255);
		text-shadow: 1px 1px 3px #aaa;
		text-align: center;
		margin: 5px;
		color: #c90230;
		font-size: 1.3em;
		background-image: linear-gradient(#fff 20%,#f6f6f6 50%,#eee 52%,#f4f4f4 100%);
		-webkit-border-radius: 5px;
		-moz-border-radius: 5px;
		border-radius: 5px;
		-moz-background-clip: padding;
		-webkit-background-clip: padding-box;
		background-clip: padding-box;
		border: 1px solid #aaa;
		-webkit-box-shadow: 0 0 3px #fff inset,0 1px 1px rgba(0,0,0,.1);
		-moz-box-shadow: 0 0 3px #fff inset,0 1px 1px rgba(0,0,0,.1);
		box-shadow: 0 0 3px #fff inset,0 1px 1px rgba(0,0,0,.1);
	}
</style>